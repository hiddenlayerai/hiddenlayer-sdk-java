// File generated from our OpenAPI spec by Stainless.

package com.hiddenlayer_sdk.api.models

import com.fasterxml.jackson.module.kotlin.jacksonTypeRef
import com.hiddenlayer_sdk.api.core.jsonMapper
import kotlin.jvm.optionals.getOrNull
import org.assertj.core.api.Assertions.assertThat
import org.junit.jupiter.api.Test

internal class NodeTest {

    @Test
    fun create() {
        val node =
            Node.builder()
                .id("id")
                .children(listOf())
                .label(
                    Message.builder()
                        .id("id")
                        .addArgument("string")
                        .markdown("markdown")
                        .properties(PropertyBag.builder().addTag("string").build())
                        .text("text")
                        .build()
                )
                .location(
                    Node.Location.builder()
                        .id(-1L)
                        .addAnnotation(
                            Region.builder()
                                .byteLength(0L)
                                .byteOffset(-1L)
                                .charLength(0L)
                                .charOffset(-1L)
                                .endColumn(1L)
                                .endLine(1L)
                                .message(
                                    Message.builder()
                                        .id("id")
                                        .addArgument("string")
                                        .markdown("markdown")
                                        .properties(PropertyBag.builder().addTag("string").build())
                                        .text("text")
                                        .build()
                                )
                                .properties(PropertyBag.builder().addTag("string").build())
                                .snippet(
                                    ArtifactContent.builder()
                                        .binary("binary")
                                        .properties(PropertyBag.builder().addTag("string").build())
                                        .rendered(
                                            MultiformatMessageString.builder()
                                                .text("text")
                                                .markdown("markdown")
                                                .properties(
                                                    PropertyBag.builder().addTag("string").build()
                                                )
                                                .build()
                                        )
                                        .text("text")
                                        .build()
                                )
                                .sourceLanguage("sourceLanguage")
                                .startColumn(1L)
                                .startLine(1L)
                                .build()
                        )
                        .addLogicalLocation(
                            Node.Location.LogicalLocation.builder()
                                .decoratedName("decoratedName")
                                .fullyQualifiedName("fullyQualifiedName")
                                .index(-1L)
                                .kind("kind")
                                .name("name")
                                .parentIndex(-1L)
                                .properties(PropertyBag.builder().addTag("string").build())
                                .build()
                        )
                        .message(
                            Message.builder()
                                .id("id")
                                .addArgument("string")
                                .markdown("markdown")
                                .properties(PropertyBag.builder().addTag("string").build())
                                .text("text")
                                .build()
                        )
                        .physicalLocation(
                            Node.Location.PhysicalLocation.builder()
                                .address(
                                    Node.Location.PhysicalLocation.Address.builder()
                                        .absoluteAddress(-1L)
                                        .fullyQualifiedName("fullyQualifiedName")
                                        .index(-1L)
                                        .kind("kind")
                                        .length(0L)
                                        .name("name")
                                        .offsetFromParent(0L)
                                        .parentIndex(-1L)
                                        .properties(PropertyBag.builder().addTag("string").build())
                                        .relativeAddress(0L)
                                        .build()
                                )
                                .artifactLocation(
                                    Node.Location.PhysicalLocation.ArtifactLocation.builder()
                                        .description(
                                            Message.builder()
                                                .id("id")
                                                .addArgument("string")
                                                .markdown("markdown")
                                                .properties(
                                                    PropertyBag.builder().addTag("string").build()
                                                )
                                                .text("text")
                                                .build()
                                        )
                                        .index(-1L)
                                        .properties(PropertyBag.builder().addTag("string").build())
                                        .uri("uri")
                                        .uriBaseId("uriBaseId")
                                        .build()
                                )
                                .contextRegion(
                                    Region.builder()
                                        .byteLength(0L)
                                        .byteOffset(-1L)
                                        .charLength(0L)
                                        .charOffset(-1L)
                                        .endColumn(1L)
                                        .endLine(1L)
                                        .message(
                                            Message.builder()
                                                .id("id")
                                                .addArgument("string")
                                                .markdown("markdown")
                                                .properties(
                                                    PropertyBag.builder().addTag("string").build()
                                                )
                                                .text("text")
                                                .build()
                                        )
                                        .properties(PropertyBag.builder().addTag("string").build())
                                        .snippet(
                                            ArtifactContent.builder()
                                                .binary("binary")
                                                .properties(
                                                    PropertyBag.builder().addTag("string").build()
                                                )
                                                .rendered(
                                                    MultiformatMessageString.builder()
                                                        .text("text")
                                                        .markdown("markdown")
                                                        .properties(
                                                            PropertyBag.builder()
                                                                .addTag("string")
                                                                .build()
                                                        )
                                                        .build()
                                                )
                                                .text("text")
                                                .build()
                                        )
                                        .sourceLanguage("sourceLanguage")
                                        .startColumn(1L)
                                        .startLine(1L)
                                        .build()
                                )
                                .properties(PropertyBag.builder().addTag("string").build())
                                .region(
                                    Region.builder()
                                        .byteLength(0L)
                                        .byteOffset(-1L)
                                        .charLength(0L)
                                        .charOffset(-1L)
                                        .endColumn(1L)
                                        .endLine(1L)
                                        .message(
                                            Message.builder()
                                                .id("id")
                                                .addArgument("string")
                                                .markdown("markdown")
                                                .properties(
                                                    PropertyBag.builder().addTag("string").build()
                                                )
                                                .text("text")
                                                .build()
                                        )
                                        .properties(PropertyBag.builder().addTag("string").build())
                                        .snippet(
                                            ArtifactContent.builder()
                                                .binary("binary")
                                                .properties(
                                                    PropertyBag.builder().addTag("string").build()
                                                )
                                                .rendered(
                                                    MultiformatMessageString.builder()
                                                        .text("text")
                                                        .markdown("markdown")
                                                        .properties(
                                                            PropertyBag.builder()
                                                                .addTag("string")
                                                                .build()
                                                        )
                                                        .build()
                                                )
                                                .text("text")
                                                .build()
                                        )
                                        .sourceLanguage("sourceLanguage")
                                        .startColumn(1L)
                                        .startLine(1L)
                                        .build()
                                )
                                .build()
                        )
                        .properties(PropertyBag.builder().addTag("string").build())
                        .addRelationship(
                            Node.Location.Relationship.builder()
                                .target(0L)
                                .description(
                                    Message.builder()
                                        .id("id")
                                        .addArgument("string")
                                        .markdown("markdown")
                                        .properties(PropertyBag.builder().addTag("string").build())
                                        .text("text")
                                        .build()
                                )
                                .addKind("string")
                                .properties(PropertyBag.builder().addTag("string").build())
                                .build()
                        )
                        .build()
                )
                .properties(PropertyBag.builder().addTag("string").build())
                .build()

        assertThat(node.id()).isEqualTo("id")
        assertThat(node.children().getOrNull()).containsExactly()
        assertThat(node.label())
            .contains(
                Message.builder()
                    .id("id")
                    .addArgument("string")
                    .markdown("markdown")
                    .properties(PropertyBag.builder().addTag("string").build())
                    .text("text")
                    .build()
            )
        assertThat(node.location())
            .contains(
                Node.Location.builder()
                    .id(-1L)
                    .addAnnotation(
                        Region.builder()
                            .byteLength(0L)
                            .byteOffset(-1L)
                            .charLength(0L)
                            .charOffset(-1L)
                            .endColumn(1L)
                            .endLine(1L)
                            .message(
                                Message.builder()
                                    .id("id")
                                    .addArgument("string")
                                    .markdown("markdown")
                                    .properties(PropertyBag.builder().addTag("string").build())
                                    .text("text")
                                    .build()
                            )
                            .properties(PropertyBag.builder().addTag("string").build())
                            .snippet(
                                ArtifactContent.builder()
                                    .binary("binary")
                                    .properties(PropertyBag.builder().addTag("string").build())
                                    .rendered(
                                        MultiformatMessageString.builder()
                                            .text("text")
                                            .markdown("markdown")
                                            .properties(
                                                PropertyBag.builder().addTag("string").build()
                                            )
                                            .build()
                                    )
                                    .text("text")
                                    .build()
                            )
                            .sourceLanguage("sourceLanguage")
                            .startColumn(1L)
                            .startLine(1L)
                            .build()
                    )
                    .addLogicalLocation(
                        Node.Location.LogicalLocation.builder()
                            .decoratedName("decoratedName")
                            .fullyQualifiedName("fullyQualifiedName")
                            .index(-1L)
                            .kind("kind")
                            .name("name")
                            .parentIndex(-1L)
                            .properties(PropertyBag.builder().addTag("string").build())
                            .build()
                    )
                    .message(
                        Message.builder()
                            .id("id")
                            .addArgument("string")
                            .markdown("markdown")
                            .properties(PropertyBag.builder().addTag("string").build())
                            .text("text")
                            .build()
                    )
                    .physicalLocation(
                        Node.Location.PhysicalLocation.builder()
                            .address(
                                Node.Location.PhysicalLocation.Address.builder()
                                    .absoluteAddress(-1L)
                                    .fullyQualifiedName("fullyQualifiedName")
                                    .index(-1L)
                                    .kind("kind")
                                    .length(0L)
                                    .name("name")
                                    .offsetFromParent(0L)
                                    .parentIndex(-1L)
                                    .properties(PropertyBag.builder().addTag("string").build())
                                    .relativeAddress(0L)
                                    .build()
                            )
                            .artifactLocation(
                                Node.Location.PhysicalLocation.ArtifactLocation.builder()
                                    .description(
                                        Message.builder()
                                            .id("id")
                                            .addArgument("string")
                                            .markdown("markdown")
                                            .properties(
                                                PropertyBag.builder().addTag("string").build()
                                            )
                                            .text("text")
                                            .build()
                                    )
                                    .index(-1L)
                                    .properties(PropertyBag.builder().addTag("string").build())
                                    .uri("uri")
                                    .uriBaseId("uriBaseId")
                                    .build()
                            )
                            .contextRegion(
                                Region.builder()
                                    .byteLength(0L)
                                    .byteOffset(-1L)
                                    .charLength(0L)
                                    .charOffset(-1L)
                                    .endColumn(1L)
                                    .endLine(1L)
                                    .message(
                                        Message.builder()
                                            .id("id")
                                            .addArgument("string")
                                            .markdown("markdown")
                                            .properties(
                                                PropertyBag.builder().addTag("string").build()
                                            )
                                            .text("text")
                                            .build()
                                    )
                                    .properties(PropertyBag.builder().addTag("string").build())
                                    .snippet(
                                        ArtifactContent.builder()
                                            .binary("binary")
                                            .properties(
                                                PropertyBag.builder().addTag("string").build()
                                            )
                                            .rendered(
                                                MultiformatMessageString.builder()
                                                    .text("text")
                                                    .markdown("markdown")
                                                    .properties(
                                                        PropertyBag.builder()
                                                            .addTag("string")
                                                            .build()
                                                    )
                                                    .build()
                                            )
                                            .text("text")
                                            .build()
                                    )
                                    .sourceLanguage("sourceLanguage")
                                    .startColumn(1L)
                                    .startLine(1L)
                                    .build()
                            )
                            .properties(PropertyBag.builder().addTag("string").build())
                            .region(
                                Region.builder()
                                    .byteLength(0L)
                                    .byteOffset(-1L)
                                    .charLength(0L)
                                    .charOffset(-1L)
                                    .endColumn(1L)
                                    .endLine(1L)
                                    .message(
                                        Message.builder()
                                            .id("id")
                                            .addArgument("string")
                                            .markdown("markdown")
                                            .properties(
                                                PropertyBag.builder().addTag("string").build()
                                            )
                                            .text("text")
                                            .build()
                                    )
                                    .properties(PropertyBag.builder().addTag("string").build())
                                    .snippet(
                                        ArtifactContent.builder()
                                            .binary("binary")
                                            .properties(
                                                PropertyBag.builder().addTag("string").build()
                                            )
                                            .rendered(
                                                MultiformatMessageString.builder()
                                                    .text("text")
                                                    .markdown("markdown")
                                                    .properties(
                                                        PropertyBag.builder()
                                                            .addTag("string")
                                                            .build()
                                                    )
                                                    .build()
                                            )
                                            .text("text")
                                            .build()
                                    )
                                    .sourceLanguage("sourceLanguage")
                                    .startColumn(1L)
                                    .startLine(1L)
                                    .build()
                            )
                            .build()
                    )
                    .properties(PropertyBag.builder().addTag("string").build())
                    .addRelationship(
                        Node.Location.Relationship.builder()
                            .target(0L)
                            .description(
                                Message.builder()
                                    .id("id")
                                    .addArgument("string")
                                    .markdown("markdown")
                                    .properties(PropertyBag.builder().addTag("string").build())
                                    .text("text")
                                    .build()
                            )
                            .addKind("string")
                            .properties(PropertyBag.builder().addTag("string").build())
                            .build()
                    )
                    .build()
            )
        assertThat(node.properties()).contains(PropertyBag.builder().addTag("string").build())
    }

    @Test
    fun roundtrip() {
        val jsonMapper = jsonMapper()
        val node =
            Node.builder()
                .id("id")
                .children(listOf())
                .label(
                    Message.builder()
                        .id("id")
                        .addArgument("string")
                        .markdown("markdown")
                        .properties(PropertyBag.builder().addTag("string").build())
                        .text("text")
                        .build()
                )
                .location(
                    Node.Location.builder()
                        .id(-1L)
                        .addAnnotation(
                            Region.builder()
                                .byteLength(0L)
                                .byteOffset(-1L)
                                .charLength(0L)
                                .charOffset(-1L)
                                .endColumn(1L)
                                .endLine(1L)
                                .message(
                                    Message.builder()
                                        .id("id")
                                        .addArgument("string")
                                        .markdown("markdown")
                                        .properties(PropertyBag.builder().addTag("string").build())
                                        .text("text")
                                        .build()
                                )
                                .properties(PropertyBag.builder().addTag("string").build())
                                .snippet(
                                    ArtifactContent.builder()
                                        .binary("binary")
                                        .properties(PropertyBag.builder().addTag("string").build())
                                        .rendered(
                                            MultiformatMessageString.builder()
                                                .text("text")
                                                .markdown("markdown")
                                                .properties(
                                                    PropertyBag.builder().addTag("string").build()
                                                )
                                                .build()
                                        )
                                        .text("text")
                                        .build()
                                )
                                .sourceLanguage("sourceLanguage")
                                .startColumn(1L)
                                .startLine(1L)
                                .build()
                        )
                        .addLogicalLocation(
                            Node.Location.LogicalLocation.builder()
                                .decoratedName("decoratedName")
                                .fullyQualifiedName("fullyQualifiedName")
                                .index(-1L)
                                .kind("kind")
                                .name("name")
                                .parentIndex(-1L)
                                .properties(PropertyBag.builder().addTag("string").build())
                                .build()
                        )
                        .message(
                            Message.builder()
                                .id("id")
                                .addArgument("string")
                                .markdown("markdown")
                                .properties(PropertyBag.builder().addTag("string").build())
                                .text("text")
                                .build()
                        )
                        .physicalLocation(
                            Node.Location.PhysicalLocation.builder()
                                .address(
                                    Node.Location.PhysicalLocation.Address.builder()
                                        .absoluteAddress(-1L)
                                        .fullyQualifiedName("fullyQualifiedName")
                                        .index(-1L)
                                        .kind("kind")
                                        .length(0L)
                                        .name("name")
                                        .offsetFromParent(0L)
                                        .parentIndex(-1L)
                                        .properties(PropertyBag.builder().addTag("string").build())
                                        .relativeAddress(0L)
                                        .build()
                                )
                                .artifactLocation(
                                    Node.Location.PhysicalLocation.ArtifactLocation.builder()
                                        .description(
                                            Message.builder()
                                                .id("id")
                                                .addArgument("string")
                                                .markdown("markdown")
                                                .properties(
                                                    PropertyBag.builder().addTag("string").build()
                                                )
                                                .text("text")
                                                .build()
                                        )
                                        .index(-1L)
                                        .properties(PropertyBag.builder().addTag("string").build())
                                        .uri("uri")
                                        .uriBaseId("uriBaseId")
                                        .build()
                                )
                                .contextRegion(
                                    Region.builder()
                                        .byteLength(0L)
                                        .byteOffset(-1L)
                                        .charLength(0L)
                                        .charOffset(-1L)
                                        .endColumn(1L)
                                        .endLine(1L)
                                        .message(
                                            Message.builder()
                                                .id("id")
                                                .addArgument("string")
                                                .markdown("markdown")
                                                .properties(
                                                    PropertyBag.builder().addTag("string").build()
                                                )
                                                .text("text")
                                                .build()
                                        )
                                        .properties(PropertyBag.builder().addTag("string").build())
                                        .snippet(
                                            ArtifactContent.builder()
                                                .binary("binary")
                                                .properties(
                                                    PropertyBag.builder().addTag("string").build()
                                                )
                                                .rendered(
                                                    MultiformatMessageString.builder()
                                                        .text("text")
                                                        .markdown("markdown")
                                                        .properties(
                                                            PropertyBag.builder()
                                                                .addTag("string")
                                                                .build()
                                                        )
                                                        .build()
                                                )
                                                .text("text")
                                                .build()
                                        )
                                        .sourceLanguage("sourceLanguage")
                                        .startColumn(1L)
                                        .startLine(1L)
                                        .build()
                                )
                                .properties(PropertyBag.builder().addTag("string").build())
                                .region(
                                    Region.builder()
                                        .byteLength(0L)
                                        .byteOffset(-1L)
                                        .charLength(0L)
                                        .charOffset(-1L)
                                        .endColumn(1L)
                                        .endLine(1L)
                                        .message(
                                            Message.builder()
                                                .id("id")
                                                .addArgument("string")
                                                .markdown("markdown")
                                                .properties(
                                                    PropertyBag.builder().addTag("string").build()
                                                )
                                                .text("text")
                                                .build()
                                        )
                                        .properties(PropertyBag.builder().addTag("string").build())
                                        .snippet(
                                            ArtifactContent.builder()
                                                .binary("binary")
                                                .properties(
                                                    PropertyBag.builder().addTag("string").build()
                                                )
                                                .rendered(
                                                    MultiformatMessageString.builder()
                                                        .text("text")
                                                        .markdown("markdown")
                                                        .properties(
                                                            PropertyBag.builder()
                                                                .addTag("string")
                                                                .build()
                                                        )
                                                        .build()
                                                )
                                                .text("text")
                                                .build()
                                        )
                                        .sourceLanguage("sourceLanguage")
                                        .startColumn(1L)
                                        .startLine(1L)
                                        .build()
                                )
                                .build()
                        )
                        .properties(PropertyBag.builder().addTag("string").build())
                        .addRelationship(
                            Node.Location.Relationship.builder()
                                .target(0L)
                                .description(
                                    Message.builder()
                                        .id("id")
                                        .addArgument("string")
                                        .markdown("markdown")
                                        .properties(PropertyBag.builder().addTag("string").build())
                                        .text("text")
                                        .build()
                                )
                                .addKind("string")
                                .properties(PropertyBag.builder().addTag("string").build())
                                .build()
                        )
                        .build()
                )
                .properties(PropertyBag.builder().addTag("string").build())
                .build()

        val roundtrippedNode =
            jsonMapper.readValue(jsonMapper.writeValueAsString(node), jacksonTypeRef<Node>())

        assertThat(roundtrippedNode).isEqualTo(node)
    }
}
